{
  "issues": [
    {
      "name": "Magic links for verification + password reset (standard policy; excludes magic-login)",
      "id_number": 10,
      "description": "Implemented standard policy (not configurable in AuthKit):\n- Email:\n  - verification: code + link (apps can embed the code in a URL)\n  - password reset: link-only (high-entropy token; no reset codes)\n- SMS:\n  - verification: code-only (Twilio Verify)\n  - password reset: link-only (Twilio Messaging/SMS API; not Verify)\n\nAuthKit notes:\n- AuthKit does not know site base URLs or frontend routes. Host apps construct user-facing links in their templates.\n- Password reset tokens are high entropy, single-use, short TTL, stored server-side as hashes (ephemeral store).\n- Added confirm-link endpoints that accept a `token` field, plus backward-compatible behavior where legacy `code` fields carry the token.\n\nOut of scope: magic-link login (passwordless login links). Track separately.",
      "tasks": [
        "[x] Switch password reset to link-only tokens (randB64(32) + hashed storage; no 6-digit reset codes)",
        "[x] Add `core.EmailSenderWithPasswordResetLink` and require it for email password reset delivery",
        "[x] Add `core.SMSSenderWithPasswordResetLink` and use it for SMS password reset delivery (Twilio Messaging/SMS API)",
        "[x] Keep verification codes for email/SMS verification (Twilio Verify for SMS); apps can include a URL that embeds the verification code",
        "[x] Update existing reset confirm handlers to treat the value as a case-sensitive token (no uppercasing; no 6-char assumptions)",
        "[x] Add POST `/auth/password/reset/confirm-link` (expects `token`) and POST `/auth/email/verify/confirm-link` (expects `token`)",
        "[x] Update `agents/api-endpoints.md` to document confirm-link endpoints and token-based reset confirm",
        "[x] Run `go test ./...`"
      ],
      "completed": true
    },
    {
      "name": "Magic-link login (passwordless) via email/SMS (separate from verify/reset)",
      "id_number": 13,
      "description": "Add optional passwordless login using one-time magic links. This is intentionally separate from verification/password reset links.\n\nGoals:\n- Allow a user to request a login link to email (and optionally SMS) and authenticate by clicking it.\n- Keep existing password + 2FA flows intact; magic login is additive and can be disabled entirely.\n\nSecurity notes:\n- High-entropy, single-use, short TTL tokens stored as hashes.\n- Prevent open redirects; fixed redirect or allowlist.\n- Rate limit requests and token consumption; do not leak whether a user exists.\n- Consider session fixation and device binding (optional).\n\nUX:\n- Link lands on host frontend route (e.g. `/auth/magic?token=...`) which calls AuthKit to consume token and then stores session tokens.\n\nProvider notes:\n- Email is straightforward.\n- SMS magic links require Twilio Messaging/SMS API (not Twilio Verify).",
      "tasks": [
        "[ ] Add request endpoint(s): POST /auth/magic-link/request (email/phone) with anti-enumeration response",
        "[ ] Add consume endpoint(s): POST /auth/magic-link/confirm {token} -> mint session (access/refresh) and consume token",
        "[ ] Add ephemeral store keys + TTL + single-use enforcement",
        "[ ] Add rate limits for request + confirm",
        "[ ] Add optional sender interfaces for magic-login links (email + SMS messaging)",
        "[ ] Add tests (token lifecycle, request anti-enumeration, confirm success/expired)",
        "[ ] Docs: flows, security guidance, host frontend route expectations"
      ],
      "completed": false
    }
  ]
}
